{"version":3,"file":"js/867.c088a480.js","mappings":"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","sources":["webpack://kfront/./src/views/VMLogList.vue","webpack://kfront/src/views/VMLogList.vue","webpack://kfront/./src/views/VMLogList.vue?0273","webpack://kfront/./src/views/VMLogList.vue?a3ac"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"vmarea\"},[_c('el-row',{attrs:{\"gutter\":0}},[_c('el-col',{attrs:{\"span\":\"4\",\"offset\":0}},[_c('p',{staticStyle:{\"font-size\":\"25px\",\"font-weight\":\"600\",\"margin-bottom\":\"20px\"}},[_vm._v(\" 虚拟机日志列表 \")])]),_c('el-col',{attrs:{\"span\":\"4\",\"offset\":\"6\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择虚拟机\"},model:{value:(_vm.searchvm),callback:function ($$v) {_vm.searchvm=$$v},expression:\"searchvm\"}},_vm._l((_vm.options),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('el-col',{attrs:{\"span\":\"4\"}},[_c('el-date-picker',{attrs:{\"type\":\"datetime\",\"placeholder\":\"请选择开始时间\"},model:{value:(_vm.starttime),callback:function ($$v) {_vm.starttime=$$v},expression:\"starttime\"}})],1),_c('el-col',{attrs:{\"span\":\"4\"}},[_c('el-date-picker',{attrs:{\"type\":\"datetime\",\"placeholder\":\"请选择结束时间\"},model:{value:(_vm.endtime),callback:function ($$v) {_vm.endtime=$$v},expression:\"endtime\"}})],1),_c('el-col',{attrs:{\"span\":\"1\"}},[_c('el-button',{attrs:{\"round\":\"\",\"plain\":\"\",\"type\":\"primary\"},on:{\"click\":_vm.getVMLog}},[_vm._v(\"查询\")])],1)],1),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.vmlogdata.slice((_vm.curpage - 1) * _vm.pagesize, _vm.curpage * _vm.pagesize),\"empty-text\":\"暂无日志\",\"header-cell-style\":{ background: '#00b8a9', color: '#fff' }}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"序号\"}}),_c('el-table-column',{attrs:{\"sortable\":\"\",\"label\":\"虚拟机名\",\"prop\":\"vmName\"}}),_c('el-table-column',{attrs:{\"sortable\":\"\",\"label\":\"日志内容\",\"prop\":\"displayContent\"}}),_c('el-table-column',{attrs:{\"sortable\":\"\",\"label\":\"生成时间\",\"prop\":\"AddTime\"}}),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"success\"},on:{\"click\":function($event){return _vm.lookLog(scope.$index, scope.row)}}},[_vm._v(\"查看详细日志\")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.handleDelete(scope.$index, scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),(_vm.vmlogdata.length != 0)?_c('div',{staticStyle:{\"margin-top\":\"30px\"}},[_c('el-pagination',{attrs:{\"current-page\":_vm.curpage,\"page-sizes\":[10, 20, 30, 40, 50],\"page-size\":_vm.pagesize,\"layout\":\"sizes, total, prev, pager, next, jumper\",\"total\":_vm.totalvmlog,\"background\":\"\"},on:{\"update:currentPage\":function($event){_vm.curpage=$event},\"update:current-page\":function($event){_vm.curpage=$event},\"update:pageSize\":function($event){_vm.pagesize=$event},\"update:page-size\":function($event){_vm.pagesize=$event}}})],1):_vm._e(),_c('el-dialog',{attrs:{\"title\":\"详细日志\",\"visible\":_vm.logvisible},on:{\"update:visible\":function($event){_vm.logvisible=$event}}},[_c('el-card',{attrs:{\"shadow\":\"never\"}},[_vm._v(\" \"+_vm._s(_vm.logcontent)+\" \")])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"vmarea\">\r\n    <!-- 头部标题操作 -->\r\n    <el-row :gutter=\"0\">\r\n      <el-col span=\"4\" :offset=\"0\"\r\n        ><p style=\"font-size: 25px; font-weight: 600; margin-bottom: 20px\">\r\n          虚拟机日志列表\r\n        </p></el-col\r\n      >\r\n      <el-col span=\"4\" offset=\"6\">\r\n        <el-select v-model=\"searchvm\" placeholder=\"请选择虚拟机\">\r\n          <el-option\r\n            v-for=\"item in options\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\"\r\n          >\r\n          </el-option>\r\n        </el-select>\r\n      </el-col>\r\n      <el-col span=\"4\" >\r\n        <el-date-picker\r\n          v-model=\"starttime\"\r\n          type=\"datetime\"\r\n          placeholder=\"请选择开始时间\"\r\n        >\r\n        </el-date-picker>\r\n      </el-col>\r\n      <el-col span=\"4\" >\r\n        <el-date-picker\r\n          v-model=\"endtime\"\r\n          type=\"datetime\"\r\n          placeholder=\"请选择结束时间\"\r\n        >\r\n        </el-date-picker>\r\n      </el-col>\r\n      <el-col span=\"1\">\r\n        <el-button round plain type=\"primary\" @click=\"getVMLog\">查询</el-button>\r\n      </el-col>\r\n    </el-row>\r\n    <el-table\r\n      :data=\"vmlogdata.slice((curpage - 1) * pagesize, curpage * pagesize)\"\r\n      style=\"width: 100%\"\r\n      empty-text=\"暂无日志\"\r\n      :header-cell-style=\"{ background: '#00b8a9', color: '#fff' }\"\r\n    >\r\n      <!--      <el-table-column  sortable label=\"ID\" prop=\"id\">-->\r\n      <!--      </el-table-column>-->\r\n      <el-table-column type=\"index\" label=\"序号\"> </el-table-column>\r\n      <el-table-column sortable label=\"虚拟机名\" prop=\"vmName\">\r\n      </el-table-column>\r\n      <el-table-column sortable label=\"日志内容\" prop=\"displayContent\">\r\n      </el-table-column>\r\n      <el-table-column sortable label=\"生成时间\" prop=\"AddTime\">\r\n      </el-table-column>\r\n      <el-table-column fixed=\"right\" label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"success\"\r\n            @click=\"lookLog(scope.$index, scope.row)\"\r\n            >查看详细日志</el-button\r\n          >\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"danger\"\r\n            @click=\"handleDelete(scope.$index, scope.row)\"\r\n            >删除</el-button\r\n          >\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- 分页栏 -->\r\n    <div v-if=\"vmlogdata.length != 0\" style=\"margin-top: 30px\">\r\n      <el-pagination\r\n        :current-page.sync=\"curpage\"\r\n        :page-sizes=\"[10, 20, 30, 40, 50]\"\r\n        :page-size.sync=\"pagesize\"\r\n        layout=\"sizes, total, prev, pager, next, jumper\"\r\n        :total=\"totalvmlog\"\r\n        background\r\n      ></el-pagination>\r\n    </div>\r\n    <el-dialog title=\"详细日志\" :visible.sync=\"logvisible\">\r\n      <el-card shadow=\"never\">\r\n        {{ logcontent }}\r\n      </el-card>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport moment from \"moment\";\r\nexport default {\r\n  name: \"VMLogList\",\r\n  data() {\r\n    return {\r\n      baseurl: \"http://172.26.82.161:8080\",\r\n      curpage: 1,\r\n      totalvmlog: 0,\r\n      pagesize: 10,\r\n      vmlogdata: [],\r\n      starttime: \"\",\r\n      endtime: \"\",\r\n      searchvm: \"\",\r\n      logvisible: false,\r\n      logcontent: \"\",\r\n      options: [],\r\n      props: {\r\n        value: \"value\",\r\n        label: \"label\", //展示的lable名字\r\n        children: \"children\", //展示子级\r\n      },\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getVMLog();\r\n    this.getVMName();\r\n  },\r\n  methods: {\r\n    getVMName() {\r\n      this.$axios\r\n        .get(this.baseurl + \"/log/getVMName\")\r\n        .then((res) => {\r\n          console.log(res.data.content);\r\n          this.options = res.data.content;\r\n        })\r\n        .catch((err) => {});\r\n    },\r\n    lookLog(index, row) {\r\n      this.logvisible = true;\r\n      this.logcontent = row.vmContent;\r\n    },\r\n    getVMLog() {\r\n      this.starttime = moment(this.starttime).format(\"YYYY-MM-DD HH:mm:ss\");\r\n      this.endtime = moment(this.endtime).format(\"YYYY-MM-DD HH:mm:ss\");\r\n      if(this.starttime === \"Invalid date\")\r\n        this.starttime = \"\";\r\n      if(this.endtime === \"Invalid date\")\r\n        this.endtime = \"\";\r\n      this.$axios\r\n        .get(this.baseurl + \"/log/getVMLog\", {\r\n          params: {\r\n            VMName: this.searchvm,\r\n            starttime: this.starttime,\r\n            endtime: this.endtime,\r\n          },\r\n        })\r\n        .then((res) => {\r\n          console.log(res.data);\r\n          if (res.data.success) {\r\n            this.vmlogdata = res.data.content;\r\n            this.totalvmlog = res.data.content.length;\r\n          } else {\r\n            alert(res.data.msg);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          alert(err);\r\n          console.log(\"err::::\" + err);\r\n        });\r\n    },\r\n    handleDelete(index, row) {\r\n      this.$confirm(`您确定删除吗?`, \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      })\r\n        .then(() => {\r\n          this.$axios\r\n            .delete(this.baseurl + \"/log/deleteVMLog/\" + row.id)\r\n            .then((response) => {\r\n              const data = response.data;\r\n              if (data.success) {\r\n                this.$message.success(\"删除成功！\");\r\n                this.getVMLog();\r\n              } else {\r\n                this.$message.success(\"删除失败！\");\r\n              }\r\n            });\r\n        })\r\n        .catch(() => {\r\n          // 取消操作\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"已取消\",\r\n          });\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.vmarea {\r\n  background-color: #fff;\r\n  border-radius: 5px;\r\n  padding: 20px;\r\n  margin-top: 15px;\r\n}\r\n.v_html {\r\n  font-size: 20px;\r\n}\r\n/*带背景的分页按钮背景色begin*/\r\n.el-pagination.is-background .el-pager li:not(.disabled).active {\r\n  background-color: #08c0b9;\r\n  color: #fff;\r\n}\r\n.el-pagination.is-background .el-pager li.active {\r\n  color: #fff;\r\n  cursor: default;\r\n}\r\n.el-pagination.is-background .el-pager li:hover {\r\n  color: #08c0b9;\r\n}\r\n.el-pagination.is-background .el-pager li:not(.disabled):hover {\r\n  color: #08c0b9;\r\n}\r\n.el-pagination.is-background .el-pager li:not(.disabled).active:hover {\r\n  background-color: #08c0b9;\r\n  color: #fff;\r\n}\r\n/*带背景的分页按钮背景色end*/\r\n\r\n/*不带背景的分页按钮背景色begin*/\r\n.el-pager li.active {\r\n  color: #08c0b9;\r\n  cursor: default;\r\n}\r\n.el-pagination .el-pager li:hover {\r\n  color: #08c0b9;\r\n}\r\n.el-pagination .el-pager li:not(.disabled):hover {\r\n  color: #08c0b9;\r\n}\r\n/*不带背景的分页按钮背景色end*/\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./VMLogList.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./VMLogList.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./VMLogList.vue?vue&type=template&id=ae14e41c\"\nimport script from \"./VMLogList.vue?vue&type=script&lang=js\"\nexport * from \"./VMLogList.vue?vue&type=script&lang=js\"\nimport style0 from \"./VMLogList.vue?vue&type=style&index=0&id=ae14e41c&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","staticStyle","_v","model","value","searchvm","callback","$$v","expression","_l","options","item","key","label","starttime","endtime","on","getVMLog","vmlogdata","slice","curpage","pagesize","background","color","scopedSlots","_u","fn","scope","$event","lookLog","$index","row","handleDelete","length","totalvmlog","_e","logvisible","_s","logcontent","staticRenderFns","name","data","baseurl","props","children","mounted","getVMName","methods","$axios","get","then","res","console","log","content","catch","err","index","vmContent","moment","format","params","VMName","success","alert","msg","$confirm","confirmButtonText","cancelButtonText","type","delete","id","response","$message","message","component"],"sourceRoot":""}