"use strict";(self["webpackChunkkfront"]=self["webpackChunkkfront"]||[]).push([[371],{8371:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var s=function(){var e=this,t=e._self._c;return t("transition",{attrs:{name:"fade"}},[t("div",{staticClass:"machinearea"},[t("div",{staticStyle:{"font-size":"30px","font-weight":"600","margin-bottom":"20px"}},[e._v(" 节点信息 ")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.nodeinfo,"empty-text":"暂无节点信息","header-cell-style":{background:"#00b8a9",color:"#fff"},"row-class-name":e.tableRowClassName}},[t("el-table-column",{attrs:{width:"100",type:"index",label:"序号"}}),t("el-table-column",{attrs:{sortable:"",prop:"nodeName",label:"节点名称",width:"200"}}),t("el-table-column",{attrs:{sortable:"",prop:"nodeIp",label:"节点IP",width:"200"}}),t("el-table-column",{attrs:{sortable:"",prop:"nodeStatus",label:"节点状态",width:"200"}}),t("el-table-column",{attrs:{sortable:"",prop:"nodeLocation",label:"节点位置",width:"200"}}),t("el-table-column",{attrs:{sortable:"",prop:"nodeType",label:"节点类型",width:"180"},scopedSlots:e._u([{key:"default",fn:function(a){return["云"===a.row.nodeType?t("el-tag",{attrs:{type:"success",effect:"dark"}},[e._v("云节点")]):"边"===a.row.nodeType?t("el-tag",{attrs:{type:"primary",effect:"dark"}},[e._v("边节点")]):"端"===a.row.nodeType?t("el-tag",{attrs:{type:"warning",effect:"dark"}},[e._v("端节点")]):t("el-tag",{attrs:{type:"info",effect:"dark"}},[e._v(e._s(a.row.nodeType)+"节点")])]}}])}),t("el-table-column",{attrs:{width:"100",sortable:"",prop:"nodeConnectivity",label:"是否连接"},scopedSlots:e._u([{key:"default",fn:function(a){return[1===a.row.nodeConnectivity?t("el-tag",{attrs:{type:"success"}},[e._v("已连接")]):t("el-tag",{attrs:{type:"danger"}},[e._v("未连接")])]}}])}),t("el-table-column",{attrs:{label:"内容",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button-group",[t("el-button",{attrs:{size:"mini",plain:"",type:"default"},on:{click:function(t){return e.topod(a.row)}}},[e._v("容器管理")]),t("el-button",{attrs:{size:"mini",plain:"",type:"default"},on:{click:function(t){return e.tovm(a.row)}}},[e._v("虚拟机管理")])],1)]}}])})],1),t("el-card",{directives:[{name:"show",rawName:"v-show",value:e.showInfo,expression:"showInfo"}],staticClass:"info-card"},[t("h2",[e._v("CPU信息：")]),t("el-table",{attrs:{data:[e.cpuInfo]}},[t("el-table-column",{attrs:{prop:"cpuNum",label:"核心数"}}),t("el-table-column",{attrs:{prop:"sys",label:"CPU系统使用率"}},[e._v(e._s(e._f("decimalFilter")(e.cpuInfo.sys)))]),t("el-table-column",{attrs:{prop:"used",label:"CPU用户使用率"}},[e._v(e._s(e._f("decimalFilter")(e.cpuInfo.used)))]),t("el-table-column",{attrs:{prop:"wait",label:"CPU当前等待率"}},[e._v(e._s(e._f("decimalFilter")(e.cpuInfo.wait)))]),t("el-table-column",{attrs:{prop:"free",label:"CPU当前空闲率"}},[e._v(e._s(e._f("decimalFilter")(e.cpuInfo.free)))])],1)],1),t("el-card",{directives:[{name:"show",rawName:"v-show",value:e.showInfo,expression:"showInfo"}],staticClass:"info-card"},[t("h2",[e._v("JVM信息：")]),t("el-table",{attrs:{data:[e.jvmInfo]}},[t("el-table-column",{attrs:{prop:"total",label:"JVM已分配内存(MB)"}}),t("el-table-column",{attrs:{prop:"max",label:"JVM最大内存(MB)"}}),t("el-table-column",{attrs:{prop:"free",label:"JVM空闲内存(MB)"}}),t("el-table-column",{attrs:{prop:"version",label:"JDK版本"}}),t("el-table-column",{attrs:{prop:"home",label:"JDK路径"}})],1)],1),t("el-card",{directives:[{name:"show",rawName:"v-show",value:e.showInfo,expression:"showInfo"}],staticClass:"info-card"},[t("h2",[e._v("内存信息：")]),t("el-table",{attrs:{data:[e.memoryInfo]}},[t("el-table-column",{attrs:{prop:"total",label:"内存总量(GB)"}}),t("el-table-column",{attrs:{prop:"used",label:"已用内存(GB)"}}),t("el-table-column",{attrs:{prop:"free",label:"剩余内存(GB)"}})],1)],1),t("el-card",{staticClass:"info-card"},[t("el-row",[t("el-col",{attrs:{span:12}},[t("div",{ref:"cpuChart",staticClass:"chart-container"})]),t("el-col",{attrs:{span:12}},[t("div",{ref:"memoryChart",staticClass:"chart-container"})])],1)],1),t("el-card",{directives:[{name:"show",rawName:"v-show",value:e.showInfo,expression:"showInfo"}],staticClass:"info-card"},[t("h2",[e._v("系统信息：")]),t("el-table",{attrs:{data:[e.systeminfo]}},[t("el-table-column",{attrs:{prop:"computerName",label:"服务器名称"}}),t("el-table-column",{attrs:{prop:"computerIp",label:"服务器Ip"}}),t("el-table-column",{attrs:{prop:"userDir",label:"项目路径"}}),t("el-table-column",{attrs:{prop:"osName",label:"操作系统"}}),t("el-table-column",{attrs:{prop:"osArch",label:"处理器架构"}}),t("el-table-column",{attrs:{prop:"osVersion",label:"系统版本"}}),t("el-table-column",{attrs:{prop:"osBuild",label:"处理器型号"}})],1)],1),t("el-card",{directives:[{name:"show",rawName:"v-show",value:e.showInfo,expression:"showInfo"}],staticClass:"info-card"},[t("h2",[e._v("文件系统信息：")]),t("el-table",{attrs:{data:e.sysFiles}},[t("el-table-column",{attrs:{prop:"dirName",label:"挂载地址"}}),t("el-table-column",{attrs:{prop:"sysTypeName",label:"文件系统类型"}}),t("el-table-column",{attrs:{prop:"typeName",label:"类型名称"}}),t("el-table-column",{attrs:{prop:"total",label:"总量"}}),t("el-table-column",{attrs:{prop:"free",label:"空闲量"}}),t("el-table-column",{attrs:{prop:"used",label:"已使用量"}}),t("el-table-column",{attrs:{prop:"usage",label:"使用百分比"}})],1)],1)],1)])},o=[],l=(a(70560),a(70710)),r={name:"machineinfo",mounted(){this.curnode=this.$store.state.nodename,this.getMachineInfoByIp(this.$store.state.nodeip),this.getnodeinfo()},data(){return{psearch:"",nodeinfo:[],dialogTableVisible:!1,baseurl:"http://39.98.124.97:8080",cpuInfo:{cpuNum:"",total:"",sys:"",used:"",wait:"",free:""},jvmInfo:{total:"",max:"",free:"",version:"",home:""},memoryInfo:{total:"",used:"",free:""},systeminfo:{computerName:"",computerIp:"",userDir:"",osName:"",osArch:"",osVersion:"",osBuild:""},sysFiles:[],file:{dirName:"",sysTypeName:"",typeName:"",total:"",free:"",used:"",usage:""},showInfo:!1,curnode:"",data_nodename_w:""}},filters:{decimalFilter(e){return"string"===typeof e&&(e=parseFloat(e)),"number"===typeof e?e.toFixed(2):e}},methods:{topod(e){this.$store.state.nodename=e.nodeName,this.$store.state.nodeip=e.nodeIp,this.$router.push("/podlist")},tovm(e){this.$store.state.nodename=e.nodeName,this.$store.state.nodeip=e.nodeIp,this.$router.push("/vmlist")},tableRowClassName({row:e,rowIndex:t}){return e.nodeName===this.curnode?"success-row":""},getnodeinfo(){this.$axios.get(this.baseurl+"/node/getNodeList1").then((e=>{this.nodeinfo=e.data.content})).catch((e=>{console.log("errors",e)}))},getMachineInfoByIp(e){this.$axios.get(this.baseurl+"/Machine/getMachineInfoByIP?ip="+e).then((e=>{e.data.success&&(this.cpuInfo=e.data.content.cpuInfo,this.jvmInfo=e.data.content.jvmInfo,this.memoryInfo=e.data.content.memoryInfo,this.systeminfo=e.data.content.systeminfo,this.drawMemoryChart(),this.drawCpuChart(),e.data.content.sysFiles.forEach((e=>{this.sysFiles.push(e)})),this.showInfo=!0)})).catch((e=>{console.log("errors",e)}))},getMachineInfo(){this.$axios.get(this.baseurl+"/Machine/getMachineInfo").then((e=>{e.data.success&&(this.cpuInfo=e.data.content.cpuInfo,this.jvmInfo=e.data.content.jvmInfo,this.memoryInfo=e.data.content.memoryInfo,this.systeminfo=e.data.content.systeminfo,this.drawMemoryChart(),this.drawCpuChart(),e.data.content.sysFiles.forEach((e=>{this.sysFiles.push(e)})),this.showInfo=!0)})).catch((e=>{console.log("errors",e)}))},decimalFilter(e){return"string"===typeof e&&(e=parseFloat(e)),"number"===typeof e?e.toFixed(2):e},drawMemoryChart(){const e=l.init(this.$refs.memoryChart),t=[{value:this.decimalFilter(this.memoryInfo.used),name:"已用内存"+this.decimalFilter(this.memoryInfo.used)+"GB"},{value:this.decimalFilter(this.memoryInfo.free),name:"剩余内存"+this.decimalFilter(this.memoryInfo.free)+"GB"}],a={title:{text:"内存利用率",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} GB ({d}%)"},legend:{orient:"vertical",left:"left",data:["已用内存"+this.decimalFilter(this.memoryInfo.used)+"GB","剩余内存"+this.decimalFilter(this.memoryInfo.free)+"GB"]},series:[{name:"内存利用率",type:"pie",radius:"50%",center:["50%","60%"],data:t,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};e.setOption(a)},drawCpuChart(){const e=l.init(this.$refs.cpuChart),t=[{value:this.decimalFilter(this.cpuInfo.used),name:"用户使用CPU"+this.decimalFilter(this.cpuInfo.used)+"%"},{value:this.decimalFilter(this.cpuInfo.sys),name:"系统使用CPU"+this.decimalFilter(this.cpuInfo.sys)+"%"},{value:this.decimalFilter(this.cpuInfo.free),name:"剩余CPU"+this.decimalFilter(this.cpuInfo.free)+"%"}],a={title:{text:"CPU利用率",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c}% ({d}%)"},legend:{orient:"vertical",left:"left",data:["用户使用CPU"+this.decimalFilter(this.cpuInfo.used)+"%","剩余CPU"+this.decimalFilter(this.cpuInfo.free)+"%","系统使用CPU"+this.decimalFilter(this.cpuInfo.sys)+"%"]},series:[{name:"CPU利用率",type:"pie",radius:"50%",center:["50%","60%"],data:t,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};e.setOption(a)}},computed:{tmp_nodename(){return this.$store.state.nodename}},watch:{tmp_nodename(e,t){this.curnode=e,this.getMachineInfoByIp(this.$store.state.nodeip),this.$message({message:"已切换"+e+"详情信息",type:"success"})}}},n=r,i=a(1001),c=(0,i.Z)(n,s,o,!1,null,null,null),m=c.exports}}]);
//# sourceMappingURL=371.6d076dbb.js.map