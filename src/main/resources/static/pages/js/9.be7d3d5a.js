"use strict";(self["webpackChunkkfront"]=self["webpackChunkkfront"]||[]).push([[9],{3009:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var l=function(){var e=this,t=e._self._c;return t("div",[t("el-card",{staticClass:"vmcard",attrs:{shadow:"hover"}},[t("div",{staticClass:"vmhead",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("创建虚拟机")])]),t("el-form",{ref:"formData",attrs:{"label-position":"top","label-width":"80px",model:e.formData,"status-icon":!0,rules:e.vm_rules}},[t("el-row",{attrs:{gutter:30}},[t("el-col",{attrs:{span:12,offset:0}},[t("el-form-item",{attrs:{label:"虚拟机名称",prop:"name"}},[t("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入虚拟机名称"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1)],1),t("el-col",{attrs:{span:12,offset:0}},[t("el-form-item",{attrs:{label:"内存",prop:"memory"}},[t("el-select",{staticStyle:{width:"60%"},attrs:{clearable:"",placeholder:"请选择内存大小(GiB)"},model:{value:e.formData.memory,callback:function(t){e.$set(e.formData,"memory",t)},expression:"formData.memory"}},e._l(e.memory_options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),t("el-row",{attrs:{gutter:30}},[t("el-col",{attrs:{span:12,offset:0}},[t("el-form-item",{attrs:{label:"CPU个数",prop:"cpuNum"}},[t("el-select",{staticStyle:{width:"60%"},attrs:{clearable:"",placeholder:"请选择CPU个数"},model:{value:e.formData.cpuNum,callback:function(t){e.$set(e.formData,"cpuNum",t)},expression:"formData.cpuNum"}},e._l(e.cpunum_options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:12,offset:0}},[t("el-form-item",{attrs:{label:"系统类型",prop:"OStype"}},[t("el-select",{staticStyle:{width:"60%"},attrs:{clearable:"",placeholder:"请选择系统类型"},model:{value:e.formData.OStype,callback:function(t){e.$set(e.formData,"OStype",t)},expression:"formData.OStype"}},e._l(e.ostype_options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),t("el-form-item",{attrs:{label:"虚拟机映像文件",prop:"vm_iso"}},[t("el-upload",{ref:"upload",staticClass:"upload-demo",staticStyle:{width:"30%"},attrs:{drag:"",action:e.baseurl+"/addVirtual",multiple:!1,data:e.formData,accept:".iso","auto-upload":!1,limit:1,"before-upload":e.handleBeforeUpload,"on-success":e.sucupload,"on-error":e.errupload}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或"),t("em",[e._v("点击上传")])]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("*只能上传.iso文件")])])],1),t("el-form-item",{attrs:{size:"large"}},[t("div",{staticClass:"vmc-sbm-area"},[t("el-button",{attrs:{round:""},on:{click:function(t){return e.resetForm("formData")}}},[e._v("清空输入")]),t("el-button",{attrs:{round:"",type:"primary"},on:{click:function(t){return e.vmc_sumbit("formData")}}},[e._v("立即创建")])],1)])],1)],1)],1)},r=[],o=(a(560),{name:"VMCreate",data(){return{baseurl:"http://172.26.82.161:8080",ostype_options:[{label:"x86",value:"X86"},{label:"arm",value:"arm"}],cpunum_options:[{label:"1 个",value:"1"},{label:"2 个",value:"2"},{label:"4 个",value:"4"},{label:"6 个",value:"6"},{label:"8 个",value:"8"},{label:"10 个",value:"10"}],memory_options:[{label:"1 GiB",value:"1"},{label:"2 GiB",value:"2"},{label:"4 GiB",value:"4"},{label:"6 GiB",value:"6"},{label:"8 GiB",value:"8"},{label:"16 GiB",value:"16"},{label:"24 GiB",value:"24"},{label:"32 GiB",value:"32"}],formData:{name:"",memory:"",cpuNum:"",OStype:""},vm_rules:{name:[{required:!0,message:"请输入虚拟机名称",trigger:"blur"}],memory:[{required:!0,message:"请选择内存大小",trigger:"change"}],cpuNum:[{required:!0,message:"请选择CPU个数",trigger:"change"}],OStype:[{required:!0,message:"请选择系统类型",trigger:"change"}]}}},methods:{errupload(e,t,a){this.$notify.error({title:"创建失败",message:JSON.parse(e.message).message,position:"bottom-right",duration:6e3})},sucupload(e,t,a){"yes"===e?(this.$notify.success({title:"创建成功",message:"虚拟机 "+this.formData.name+" 创建成功！",position:"bottom-right",duration:6e3}),this.$router.push("/vmlist")):this.$notify.error({title:"创建失败",message:e,position:"bottom-right",duration:6e3})},handleBeforeUpload(e){console.log(e);var t=e.name.substring(e.name.lastIndexOf(".")+1);const a="iso"===t;return a||(this.$message.error("只能上传ISO文件！"),!1)},vmc_sumbit(e){this.$refs[e].validate((e=>{if(!e)return console.log("表单验证不通过"),!1;this.$refs.upload.submit()}))},resetForm(e){this.$refs[e].resetFields()}}}),s=o,i=a(1001),u=(0,i.Z)(s,l,r,!1,null,null,null),m=u.exports}}]);
//# sourceMappingURL=9.be7d3d5a.js.map