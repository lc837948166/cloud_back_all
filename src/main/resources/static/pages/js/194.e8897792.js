"use strict";(self["webpackChunkkfront"]=self["webpackChunkkfront"]||[]).push([[194],{85194:function(e,t,s){s.r(t),s.d(t,{default:function(){return u}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"BgAnimation"},[t("div",{staticClass:"waves"}),0==e.page?t("div",[t("div",{staticClass:"chead"},[t("el-image",{attrs:{src:s(91880),fit:"fill",lazy:!0}}),t("div",[e._v("基于虚拟化的资源管理演示验证原型系统")])],1),t("div",{staticClass:"content"},[t("div",{staticClass:"login-box"},[t("div",{staticClass:"frosted__glass",attrs:{align:"center"}},[t("div",{staticClass:"logintitle",attrs:{align:"center"}},[e._v("登录")]),t("div",{staticClass:"logincontent"},[t("span",{staticClass:"login-label"},[e._v("账号")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"login-input",attrs:{type:"text"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),t("br"),t("span",{staticClass:"login-label"},[e._v("密码")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"login-input",attrs:{type:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),t("el-button",{staticClass:"login-btn",attrs:{type:"info",plain:"",round:""},on:{click:e.login}},[e._v("登录")])],1)])])]):t("div",[t("div",{staticClass:"box2"},[t("div",{staticClass:"frosted__glass2"},[t("div",{staticStyle:{"margin-left":"30px","margin-top":"25px"}},[t("el-page-header",{attrs:{content:e.names[e.page-1]+"详情页面"},on:{back:e.goBack}})],1),t("div",{staticClass:"detaillist"},[0==e.sp_nodeinfo[e.page-1].length?t("div",{staticStyle:{"margin-right":"150px","margin-top":"320px"}},[e._v(" 暂无"+e._s(e.names[e.page-1])+"节点 ")]):t("div",e._l(e.sp_nodeinfo[e.page-1],(function(s){return t("div",{key:s.id,staticStyle:{"margin-top":"40px"}},[t("el-row",{attrs:{gutter:0}},[t("el-col",{attrs:{span:15,offset:0}},[t("div",{staticClass:"nodename"},[!0===s.reachable?t("i",{staticClass:"el-icon-check"}):e._e(),!1===s.reachable?t("i",{staticClass:"el-icon-close"}):e._e(),e._v(" "+e._s(s.nodeName)+"/"+e._s(s.nodeLocation)+"/"+e._s(s.nodeIp)+" ")])]),t("el-col",{attrs:{span:2,offset:1}},[t("el-button",{staticStyle:{"box-shadow":"rgba(99, 99, 99, 0.2) 0px 2px 8px 0px",width:"60px",height:"60px","font-size":"20px"},attrs:{type:"enterbtn",icon:"el-icon-d-arrow-right",circle:"",disabled:!s.reachable},on:{click:function(t){return e.topage(s)}}})],1),t("el-col",{attrs:{span:2,offset:0}},[t("el-popconfirm",{attrs:{"confirm-button-text":"确认删除","cancel-button-text":"取消","confirm-button-type":"danger","cancel-button-type":"info",icon:"el-icon-info","icon-color":"gray",title:"要删除这个节点吗？"},on:{confirm:function(t){return e.deletenode(s.id)}}},[t("el-button",{staticStyle:{"box-shadow":"rgba(99, 99, 99, 0.2) 0px 2px 8px 0px",width:"60px",height:"60px","font-size":"20px"},attrs:{slot:"reference",type:"deletebtn",icon:"el-icon-delete-solid",circle:""},slot:"reference"})],1)],1),t("el-col",{attrs:{span:2,offset:0}},[t("el-button",{staticStyle:{"box-shadow":"rgba(99, 99, 99, 0.2) 0px 2px 8px 0px",width:"60px",height:"60px","font-size":"20px"},attrs:{type:"enterbtn",icon:"el-icon-stopwatch",circle:""},on:{click:function(t){return e.pingnode(s)}}})],1)],1)],1)})),0)])])])])])},o=[];s(24224),s(61121),s(37133),s(70560);class n{constructor(e,t={}){t=Object.assign({antialias:!1,depthTest:!1,mousemove:!1,autosize:!0,side:"front",vertex:"\n            precision highp float;\n    \n            attribute vec4 a_position;\n            attribute vec4 a_color;\n    \n            uniform float u_time;\n            uniform vec2 u_resolution;\n            uniform vec2 u_mousemove;\n            uniform mat4 u_projection;\n    \n            varying vec4 v_color;\n    \n            void main() {\n    \n              gl_Position = u_projection * a_position;\n              gl_PointSize = (10.0 / gl_Position.w) * 100.0;\n    \n              v_color = a_color;\n    \n            }",fragment:"\n            precision highp float;\n    \n            uniform sampler2D u_texture;\n            uniform int u_hasTexture;\n    \n            varying vec4 v_color;\n    \n            void main() {\n    \n              if ( u_hasTexture == 1 ) {\n    \n                gl_FragColor = v_color * texture2D(u_texture, gl_PointCoord);\n    \n              } else {\n    \n                gl_FragColor = v_color;\n    \n              }\n    \n            }",uniforms:{},buffers:{},camera:{},texture:null,onUpdate:()=>{},onResize:()=>{}},t);const s=Object.assign({time:{type:"float",value:0},hasTexture:{type:"int",value:0},resolution:{type:"vec2",value:[0,0]},mousemove:{type:"vec2",value:[0,0]},projection:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},t.uniforms),i=Object.assign({position:{size:3,data:[]},color:{size:4,data:[]}},t.buffers),o=Object.assign({fov:60,near:1,far:1e4,aspect:1,z:100,perspective:!0},t.camera),n=document.createElement("canvas"),a=n.getContext("webgl",{antialias:t.antialias});if(!a)return!1;this.count=0,this.gl=a,this.canvas=n,this.camera=o,this.holder=e,this.onUpdate=t.onUpdate,this.onResize=t.onResize,this.data={},e.appendChild(n),this.createProgram(t.vertex,t.fragment),this.createBuffers(i),this.createUniforms(s),this.updateBuffers(),this.updateUniforms(),this.createTexture(t.texture),a.enable(a.BLEND),a.enable(a.CULL_FACE),a.blendFunc(a.SRC_ALPHA,a.ONE),a[t.depthTest?"enable":"disable"](a.DEPTH_TEST),t.autosize&&window.addEventListener("resize",(e=>this.resize(e)),!1),t.mousemove&&window.addEventListener("mousemove",(e=>this.mousemove(e)),!1),this.resize(),this.update=this.update.bind(this),this.time={start:performance.now(),old:performance.now()},this.update()}mousemove(e){let t=e.pageX/this.width*2-1,s=e.pageY/this.height*2-1;this.uniforms.mousemove=[t,s]}resize(e){const t=this.holder,s=this.canvas,i=this.gl,o=this.width=t.offsetWidth,n=this.height=t.offsetHeight,a=this.aspect=o/n,r=this.dpi=devicePixelRatio;s.width=o*r,s.height=n*r,s.style.width="100%",s.style.height="100%",i.viewport(0,0,o*r,n*r),i.clearColor(0,0,0,0),this.uniforms.resolution=[o,n],this.uniforms.projection=this.setProjection(a),this.onResize(o,n,r)}setProjection(e){const t=this.camera;if(t.perspective){t.aspect=e;const s=t.fov*(Math.PI/180),i=Math.tan(.5*Math.PI-.5*s),o=1/(t.near-t.far),n=[i/t.aspect,0,0,0,0,i,0,0,0,0,(t.near+t.far)*o,-1,0,0,t.near*t.far*o*2,0];return n[14]+=t.z,n[15]+=t.z,n}return[2/this.width,0,0,0,0,-2/this.height,0,0,0,0,1,0,-1,1,0,1]}createShader(e,t){const s=this.gl,i=s.createShader(e);if(s.shaderSource(i,t),s.compileShader(i),s.getShaderParameter(i,s.COMPILE_STATUS))return i;console.log(s.getShaderInfoLog(i)),s.deleteShader(i)}createProgram(e,t){const s=this.gl,i=this.createShader(s.VERTEX_SHADER,e),o=this.createShader(s.FRAGMENT_SHADER,t),n=s.createProgram();s.attachShader(n,i),s.attachShader(n,o),s.linkProgram(n),s.getProgramParameter(n,s.LINK_STATUS)?(s.useProgram(n),this.program=n):(console.log(s.getProgramInfoLog(n)),s.deleteProgram(n))}createUniforms(e){const t=this.gl,s=this.data.uniforms=e,i=this.uniforms={};Object.keys(s).forEach((e=>{const o=s[e];o.location=t.getUniformLocation(this.program,"u_"+e),Object.defineProperty(i,e,{set:t=>{s[e].value=t,this.setUniform(e,t)},get:()=>s[e].value})}))}setUniform(e,t){const s=this.gl,i=this.data.uniforms[e];switch(i.value=t,i.type){case"int":s.uniform1i(i.location,t);break;case"float":s.uniform1f(i.location,t);break;case"vec2":s.uniform2f(i.location,...t);break;case"vec3":s.uniform3f(i.location,...t);break;case"vec4":s.uniform4f(i.location,...t);break;case"mat2":s.uniformMatrix2fv(i.location,!1,t);break;case"mat3":s.uniformMatrix3fv(i.location,!1,t);break;case"mat4":s.uniformMatrix4fv(i.location,!1,t);break}}updateUniforms(){this.gl;const e=this.data.uniforms;Object.keys(e).forEach((t=>{const s=e[t];this.uniforms[t]=s.value}))}createBuffers(e){this.gl;const t=this.data.buffers=e,s=this.buffers={};Object.keys(t).forEach((e=>{const i=t[e];i.buffer=this.createBuffer("a_"+e,i.size),Object.defineProperty(s,e,{set:s=>{t[e].data=s,this.setBuffer(e,s),"position"==e&&(this.count=t.position.data.length/3)},get:()=>t[e].data})}))}createBuffer(e,t){const s=this.gl,i=this.program,o=s.getAttribLocation(i,e),n=s.createBuffer();return s.bindBuffer(s.ARRAY_BUFFER,n),s.enableVertexAttribArray(o),s.vertexAttribPointer(o,t,s.FLOAT,!1,0,0),n}setBuffer(e,t){const s=this.gl,i=this.data.buffers;(null!=e||s.bindBuffer(s.ARRAY_BUFFER,null))&&(s.bindBuffer(s.ARRAY_BUFFER,i[e].buffer),s.bufferData(s.ARRAY_BUFFER,new Float32Array(t),s.STATIC_DRAW))}updateBuffers(){this.gl;const e=this.buffers;Object.keys(e).forEach((t=>e[t]=buffer.data)),this.setBuffer(null)}createTexture(e){const t=this.gl,s=t.createTexture();t.bindTexture(t.TEXTURE_2D,s),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([0,0,0,0])),this.texture=s,e&&(this.uniforms.hasTexture=1,this.loadTexture(e))}loadTexture(e){const t=this.gl,s=this.texture,i=new Image;i.onload=()=>{t.bindTexture(t.TEXTURE_2D,s),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},i.src=e}update(){const e=this.gl,t=performance.now(),s=(t-this.time.start)/5e3,i=t-this.time.old;this.time.old=t,this.uniforms.time=s,this.count>0&&(e.clear(e.COLORBUFFERBIT),e.drawArrays(e.POINTS,0,this.count)),this.onUpdate(i),requestAnimationFrame(this.update)}}var a={name:"IndexView",data(){return{baseurl:"http://39.98.124.97:8080",names:["中心云","边缘云","端"],page:0,nodeinfo:[],sp_nodeinfo:[],c_nodeinfo:[],e_nodeinfo:[],d_nodeinfo:[],username:"",password:""}},methods:{login(){""===this.username||""===this.password?this.$message({message:"请输入用户名和密码",type:"error"}):this.$axios.post(this.baseurl+"/user/login",{userName:this.username,passwd:this.password,userGroupId:1}).then((e=>{e.data.success?(this.$message({message:"登录成功",type:"success"}),sessionStorage.setItem("islogin",!0),this.$router.push("/world")):this.$message({message:e.data.msg,type:"error"})})).catch((e=>{console.log("errors",e)}))},pingnode(e){this.$axios.get(this.baseurl+"/node/ping?ip="+e.nodeIp).then((t=>{" IP are reachable"===t.data?(this.$set(e,"reachable",!0),this.$message({message:e.nodeName+"可达",type:"success"})):(this.$set(e,"reachable",!1),this.$message({message:e.nodeName+"不可达",type:"error"}))})).catch((e=>{console.log("errors",e)}))},deletenode(e){this.$axios.delete(this.baseurl+"/node/deleteNodeList1/"+e).then((e=>{1==e.data.success?this.$notify.success({title:"操作通知",message:"节点删除成功",position:"bottom-right"}):this.$notify.error({title:"操作通知",message:"节点删除失败",position:"bottom-right"}),this.getnodelist()})).catch((e=>{console.log("errors",e),this.$notify.error({title:"操作通知",message:"节点删除失败，请检查网络设置",position:"bottom-right"})}))},getnodelist(){this.nodeinfo=[],this.sp_nodeinfo=[],this.c_nodeinfo=[],this.e_nodeinfo=[],this.d_nodeinfo=[],this.$axios.get(this.baseurl+"/node/getNodeList1").then((e=>{this.nodeinfo=e.data.content;for(let t=0;t<this.nodeinfo.length;t++){let e=this.nodeinfo[t];"云"===e.nodeType?this.c_nodeinfo.push(e):"边"===e.nodeType?this.e_nodeinfo.push(e):"端"===e.nodeType&&this.d_nodeinfo.push(e)}this.sp_nodeinfo.push(this.c_nodeinfo),this.sp_nodeinfo.push(this.e_nodeinfo),this.sp_nodeinfo.push(this.d_nodeinfo)})).catch((e=>{console.log("errors",e)}))},goBack(){this.page=0},tempenter(){this.$router.push("/podlist")},topage(e){sessionStorage.setItem("nodename",e.nodeName),sessionStorage.setItem("ip",e.nodeIp),this.$router.push("/podlist")}},mounted(){this.getnodelist();const e=4;new n(document.querySelector(".waves"),{texture:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAb1BMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8v0wLRAAAAJHRSTlMAC/goGvDhmwcExrVjWzrm29TRqqSKenRXVklANSIUE8mRkGpv+HOfAAABCElEQVQ4y4VT13LDMAwLrUHteO+R9f/fWMfO6dLaPeKVEECRxOULWsEGpS9nULDwia2Y+ALqUNbAWeg775zv+sA4/FFRMxt8U2FZFCVWjR/YrH4/H9sarclSKdPMWKzb8VsEeHB3m0shkhVCyNzeXeAQ9Xl4opEieX2QCGnwGbj6GMyjw9t1K0fK9YZunPXeAGsfJtYjwzxaBnozGGorYz0ypK2HzQSYx1y8DgSRo2ewOiyh2QWOEk1Y9OrQV0a8TiBM1a8eMHWYnRMy7CZ4t1CmyRkhSUvP3gRXyHOCLBxNoC3IJv//ZrJ/kxxUHPUB+6jJZZHrpg6GOjnqaOmzp4NDR48OLxn/H27SRQ08S0ZJAAAAAElFTkSuQmCC",uniforms:{size:{type:"float",value:e},field:{type:"vec3",value:[0,0,0]},speed:{type:"float",value:5}},vertex:"\n        #define M_PI 3.1415926535897932384626433832795\n    \n        precision highp float;\n    \n        attribute vec4 a_position;\n        attribute vec4 a_color;\n    \n        uniform float u_time;\n        uniform float u_size;\n        uniform float u_speed;\n        uniform vec3 u_field;\n        uniform mat4 u_projection;\n    \n        varying vec4 v_color;\n    \n        void main() {\n    \n          vec3 pos = a_position.xyz;\n    \n          pos.y += (\n            cos(pos.x / u_field.x * M_PI * 8.0 + u_time * u_speed) +\n            sin(pos.z / u_field.z * M_PI * 8.0 + u_time * u_speed)\n          ) * u_field.y;\n    \n          gl_Position = u_projection * vec4( pos.xyz, a_position.w );\n          gl_PointSize = ( u_size / gl_Position.w ) * 100.0;\n    \n          v_color = a_color;\n    \n        }",fragment:"\n        precision highp float;\n    \n        uniform sampler2D u_texture;\n    \n        varying vec4 v_color;\n    \n        void main() {\n    \n          gl_FragColor = v_color * texture2D(u_texture, gl_PointCoord);\n    \n        }",onResize(t,s,i){const o=[],n=[],a=t/s*400,r=400,c=3,l=5;for(let e=0;e<a;e+=l)for(let t=0;t<r;t+=l)o.push(-a/2+e,-30,-r/2+t),n.push(0,1-e/a*1,.5+e/a*.5,t/r);this.uniforms.field=[a,c,r],this.buffers.position=o,this.buffers.color=n,this.uniforms.size=s/400*e*i}})}},r=a,c=s(1001),l=(0,c.Z)(r,i,o,!1,null,"7c7e9c64",null),u=l.exports},91880:function(e,t,s){e.exports=s.p+"img/xw.c92e374b.png"}}]);
//# sourceMappingURL=194.e8897792.js.map